<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="../stylesheets/style.css">
    <link rel="stylesheet" type="text/css" href="../stylesheets/tabs.css">
    <link rel="stylesheet" type="text/css" href="../stylesheets/Tooltips.css">
    <link rel="stylesheet" type="text/css" href="../stylesheets/map.css">

    <!--Firebase Libraries and Init with config-->
    <script src="https://www.gstatic.com/firebasejs/4.7.0/firebase.js"></script>
    <script src="https://www.gstatic.com/firebasejs/4.7.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/4.7.0/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/4.9.0/firebase.js"></script>
    <script src="https://www.gstatic.com/firebasejs/4.9.1/firebase-firestore.js"></script>

    <script type="text/javascript" src="../javascripts/FirebaseInitialisation.js"></script>
    <script type="text/javascript" src="../javascripts/Firebase.js"></script>
    <script type="text/javascript" src="../javascripts/Profanity.js"></script>
    <script type="text/javascript" src="../javascripts/Utility.js"></script>

    <script type="text/javascript" src="../javascripts/Mine.js"></script>
    <script type="text/javascript" src="../javascripts/Block.js"></script>
    <script type="text/javascript" src="../javascripts/Message.js"></script>

    <!--Views-->
    <script type="text/javascript" src="../javascripts/Views/Block.js"></script>
    <script type="text/javascript" src="../javascripts/Views/Client.js"></script>
    <script type="text/javascript" src="../javascripts/Views/Message.js"></script>

    <!--Models-->
    <script type="text/javascript" src="../javascripts/Models/Block.js"></script>
    <script type="text/javascript" src="../javascripts/Models/Client.js"></script>
    <script type="text/javascript" src="../javascripts/Models/Message.js"></script>

    <!--Controllers-->
    <script type="text/javascript" src="../javascripts/Controllers/Block.js"></script>
    <script type="text/javascript" src="../javascripts/Controllers/Client.js"></script>
    <script type="text/javascript" src="../javascripts/Controllers/Message.js"></script>



    <script>
        var users = [];
        var allBlocks = [];
        var networkDiff = 2318932150;
        var messages = [];
        // a = Hash(0xf6c94957, 0x27359d02, 3).toString(16);
        var chainLength = 0;
        var localUser = new User();
        localUser.userID = "Of4b9xNUAAx4LqesB3oY";
        localUser.name = "Local User";
    </script>

    <title>Blockchain</title>

</head>
<body>

<!--Logo Elements-->
<div class="logo-container" >
    <img id="logo-tall" title="Visual-Chain Logo" src="https://i.imgur.com/sb4fvdm.png"/>
    <img id="logo-wide" title="Visual-Chain Logo" src="https://i.imgur.com/vxaU676.png"/>
</div>
<!--Client map-->
<ul id="map"></ul>


<div class="message tabbox">
    <!--Tab Headers-->
    <input class="tabs" id="tab1" type="radio" name="tabs" checked>
    <label class="tab" title="Messages Tab" for="tab1">Messages</label>

    <input class="tabs" id="tab2" type="radio" name="tabs">
    <label class="tab" title="Blocks Tab" for="tab2">Blocks</label>

    <input class="tabs" id="tab3" type="radio" name="tabs">
    <label class="tab" title="Clients Tab" for="tab3">Clients</label>

    <input class="tabs" id="tab4" type="radio" name="tabs">
    <label class="tab" title="Mining Tab" for="tab4">Mining</label>

    <span class="tooltip">ToolTip<span class="tooltip-content clearfix"><img src="https://heydesign.com/wp-content/uploads/2017/08/Cool-Logos-and-Graphic-Trends-about-Music-DJs-750x500.jpg" /><span class="tooltip-text">Explain what's here</span></span></span>
    <!--Message Tab-->
    <section id="content1">
        <div class = "tab_contents">
            <div class="tab_header">
                <div class="header_box">
                    <input class="m_input" id="messageText" type="text" name="fname" placeholder="Write Message Here.." value="">
                    <button class="m_send" title="Adds a new message." id="btn_NewMessage" onclick="newMessage()">Send</button>
                </div>
            </div>

            <ul id="tabs_message_list" class="tab_items_list">
                <!--<div id="m1" class="item_portion">-->
                    <!--<div class = "m_leftsection">-->
                        <!--<div class = "m_leftsectionupper">-->
                            <!--<div class = "m_user">John</div>-->
                            <!--<div class = "m_timesection">-->
                                <!--<div class = "m_timetitle">Time: </div>-->
                                <!--<div class = "m_time">12:58</div>-->
                            <!--</div>-->
                        <!--</div>-->
                        <!--<div class="m_progresssection">-->
                            <!--<div class="m_progressbar">-->
                                <!--<div class="m_progress"></div>-->
                            <!--</div>-->
                        <!--</div>-->
                    <!--</div>-->
                    <!--<div class = "m_content">-->
                        <!--Hello There!!-->
                    <!--</div>-->
                    <!--<div class = "m_cblock"></div>-->
                <!--</div>-->
            </ul>

        </div>
    </section>

    <!--Blocks Tab-->
    <section id="content2">
        <div class = "tab_contents">


            <div class="tab_header">
                <div class="header_box">
                    <div class="title" title="Current Network Difficulty" id="b_difficulty">Difficulty: 45</div>
                    <div class="single_chunk"  title="Current Chain Length" id="b_chainlength">Chain Length: 45</div>
                </div>
            </div>

<ul id="tabs_block_list" class = "tab_items_list">

</ul>
            <!--<div id="b1" class="item_portion">-->
                <!--<div class="b_leftsection">-->
                    <!--<div class="single_chunk b_number">-->
                        <!--<div class="chunk_title title">Block#: </div>-->
                        <!--<div class="chunk_content">0</div>-->

                    <!--</div>-->
                    <!--<div class="single_chunk b_ts">-->
                        <!--<div class="chunk_title title">TimeStamp: </div>-->
                        <!--<div class="chunk_content">12.59</div>-->
                    <!--</div>-->

                    <!--<div class="single_chunk b_ph">-->
                        <!--<div class="chunk_title title">PrHash: </div>-->
                        <!--<div class="chunk_content">ad1e12</div>-->
                    <!--</div>-->

                <!--</div>-->
                <!--<div class="b_midsection">-->
                    <!--<div class="single_chunk b_nonce">-->
                        <!--<div class="chunk_title title">Nonce: </div>-->
                        <!--<div class="chunk_content">45</div>-->
                    <!--</div>-->
                    <!--<div class="single_chunk b_fb">-->
                        <!--<div class="chunk_title title">FoundBy: </div>-->
                        <!--<div class="chunk_content">John</div>-->

                    <!--</div>-->
                    <!--<div class="single_chunk b_col">-->
                        <!--<div class="chunk_title title">Colour: </div>-->
                        <!--<div class="chunk_content">#45581</div>-->

                    <!--</div>-->
                <!--</div>-->
                <!--<div class="b_rightsection">-->
                    <!--<div class="b_messagesbox">-->
                        <!--<div class="b_message">12:58 - John - Hello There!!</div>-->
                        <!--<div class="b_message">12:58 - John - Hello There!!</div>-->
                        <!--<div class="b_message">12:58 - John - Hello There!!</div>-->
                        <!--<div class="b_message">12:58 - John - Hello There!!</div>-->
                    <!--</div>-->
                <!--</div>-->
            <!--</div>-->


        </div>
    </section>

    <!--Clients Header-->
    <section id="content3">
        <div class = "tab_contents">
            <div class="tab_header">
                <div class="header_box">
                    <button class="c_add" id="c_btn_add" title="Add a Bot" onclick="Bot()">+</button>
                </div>
            </div>

            <ul id="tabs_client_list" class="tab_items_list">

                <!--<li id="c2" class="item_portion">-->
                    <!--<div class="c_leftsection">-->
                        <!--<div class="c_block"></div>-->
                    <!--</div>-->
                    <!--<div class="c_midsection">First Entry - Needs Removing</div>-->
                    <!--<div class="c_rightsection">-->
                        <!--<label class="switch">-->
                            <!--<input type="checkbox" checked>-->
                            <!--<span class="slider round"></span>-->
                        <!--</label>-->
                        <!--<button class="c_remove" id="c_btn_remove" onclick="removeBot()">-</button>-->
                    <!--</div>-->
                <!--</li>-->

            </ul>
        </div>
    </section>

    <!--Mining Header-->
    <section id="content4">
        <div class = "tab_contents">
            <div class="tab_header">
                <div class="header_box">
                    <label class="switch">
                        <input type="checkbox" checked>
                        <span  title="Switch Mining On Off" class="slider round"></span>
                    </label>

                </div>
            </div>

            <div class="miner_statlayer1">
                <div class="miner_statlayer_leftsection title">Current Block</div>
            </div>
            <div class="miner_statlayer2">
                <div class="miner_statlayer_leftsection">

                    <div class="miner_statlayer1_leftsection_title">
                        <div class="mi_block" title="Current block colour" style="background: rgb(202, 135, 197)"></div>
                        Block#: </div>
                    <div id="m_s" class="miner_statlayer1_leftsection_content">1</div>
                </div>
            </div>

                <div class="miner_statlayer2">
                <div class="miner_statlayer_leftsection">
                    <div class="miner_statlayer_leftsection_title title">Nonce</div>
                    <div id="m_nonce" class="miner_statlayer_leftsection_content">45</div>
                </div>
                <div class="miner_statlayer_midsection">
                    <div class="miner_statlayer_midsection_title title">Package</div>
                    <div id="m_package" class="miner_statlayer_midsection_content">45</div>

                </div>

            </div>
            <div class="miner_statlayer2">
                <div class="miner_statlayer_leftsection">
                    <div class="miner_statlayer_leftsection_title title">Hit</div>
                    <div id="m_hit" class="miner_statlayer_leftsection_content">Yes</div>

                </div>
                <div class="miner_statlayer_midsection">
                    <div class="miner_statlayer_midsection_title title">Difficulty</div>
                    <div id="m_difficulty" class="miner_statlayer_midsection_content">45</div>

                </div>
            </div>

            <div id="attempts_titles" class="miner_attempt">
                <div class="a_col_block title">Block</div>
                <div class="a_col_hit title">Hit</div>
                <div class="a_col_nonce title">Nonce</div>
                <div class="a_col_package title">Package</div>
                <div class="a_col_messages title">Messages</div>
            </div>

            <div id="a1" class="miner_attempt">
                <div class="a_col_block">a</div>
                <div class="a_col_hit">a</div>
                <div class="a_col_nonce">a</div>
                <div class="a_col_package">a</div>
                <div class="a_col_messages">a</div>
            </div>
            <div id="a2" class="miner_attempt">
                <div class="a_col_block">a</div>
                <div class="a_col_hit">a</div>
                <div class="a_col_nonce">a</div>
                <div class="a_col_package">a</div>
                <div class="a_col_messages">a</div>
            </div>
            <div id="a3" class="miner_attempt">
                <div class="a_col_block">a</div>
                <div class="a_col_hit">a</div>
                <div class="a_col_nonce">a</div>
                <div class="a_col_package">a</div>
                <div class="a_col_messages">a</div>
            </div>
        </div>
    </section>

</div>

<p  title="Firebase Message" id="load">Firebase SDK Loading&hellip;</p>

<div id="messageSnackbar"  title="Message Snackbar" class="messageSnackbar">Welcome</div>

<script>


    var db = firebase.firestore();
    retrieveAll();
    setDatabaseListeners();

    var msgInput = document.getElementById("messageText");
    msgInput.addEventListener("keyup", function(event) {
        event.preventDefault();
        if (event.keyCode === 13) {
            newMessage();
        }
    });



    //New message


</script>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // // The Firebase SDK is initialized and available here!
        //
        // firebase.auth().onAuthStateChanged(user => { });
        // firebase.database().ref('/path/to/ref').on('value', snapshot => { });
        // firebase.messaging().requestPermission().then(() => { });
        // firebase.storage().ref('/path/to/ref').getDownloadURL().then(() => { });
        //
        // // 🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥🔥

        try {
            let app = firebase.app();
            let features = ['auth', 'database', 'messaging', 'storage', 'firestore'].filter(feature => typeof app[feature] === 'function');
            document.getElementById('load').innerHTML = `Firebase SDK loaded with ${features.join(', ')}`;
        } catch (e) {
            console.error(e);
            document.getElementById('load').innerHTML = '!!  FIREBASE BROKEN  !!';
        }
    });
</script>

</body>
</html>